{"ast":null,"code":"var _jsxFileName = \"/home/paul/PycharmProjects/django-projects/django-react-tours/frontend/src/pages/Checkout.js\";\nimport React from \"react\";\nimport { AppContext } from \"../AppContext\";\nimport { FormFieldHook } from \"../components/form/FormField\";\nimport OnHold from \"../components/OnHold\";\nimport \"./Checkout.css\"; // import { withFieldValidation } from \"../components/form/FieldValidation\";\n// const ValidatedField = withFieldValidation(FormFieldUsingHooks);\n\nexport default class Checkout extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      validationErrors: [],\n      orderPlaced: false\n    };\n  }\n\n  placeOrder() {\n    this.context.placeOrder().then(() => {\n      this.setState({\n        validationErrors: [],\n        orderPlaced: true\n      });\n    }).catch(validationErrors => {\n      this.setState({\n        validationErrors,\n        orderPlaced: false\n      });\n    });\n  }\n\n  render() {\n    const _this$context = this.context,\n          booking = _this$context.booking,\n          item = _this$context.item,\n          updateField = _this$context.updateField,\n          clearOrderItem = _this$context.clearOrderItem;\n    const _this$state = this.state,\n          validationErrors = _this$state.validationErrors,\n          orderPlaced = _this$state.orderPlaced;\n    const inputFields = [{\n      label: \"Name\",\n      name: \"name\"\n    }, {\n      label: \"Email Address\",\n      name: \"email_address\"\n    }, {\n      label: \"Street Address\",\n      name: \"street_address\"\n    }, {\n      label: \"City\",\n      name: \"city\"\n    }];\n\n    if (orderPlaced) {\n      return React.createElement(\"section\", {\n        className: \"Checkout\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"Checkout-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, \"Checkout\"), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, \"Thanks for buying an excursion with Explore California!\")));\n    }\n\n    const errors = [];\n    inputFields.forEach(field => {\n      const error = validationErrors[field.name];\n\n      if (error) {\n        errors.push(React.createElement(\"li\", {\n          className: \"error\",\n          key: field.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, field.label, \": \", error));\n      }\n    });\n    const formFields = inputFields.map(fieldProps => {\n      return React.createElement(FormFieldHook, Object.assign({\n        key: fieldProps.name,\n        value: booking[fieldProps.name],\n        onUpdate: updateField\n      }, fieldProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }));\n    });\n    let displayItem;\n\n    if (item) {\n      displayItem = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, item.name, \" - $\", item.price, \" starts on \", item.start, \" for\", \" \", item.tour_length, \" days.\\xA0\", React.createElement(\"button\", {\n        className: \"Checkout-package-remove\",\n        onClick: () => clearOrderItem(item.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Remove\"));\n    }\n\n    return React.createElement(\"section\", {\n      className: \"Checkout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      className: \"Checkout-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Checkout\")), React.createElement(\"section\", {\n      className: \"Checkout-summary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, item && React.createElement(OnHold, {\n      duration: 59,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), displayItem), React.createElement(\"section\", {\n      className: \"Checkout-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, errors), formFields)), React.createElement(\"section\", {\n      className: \"Checkout-actions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Checkout-actions__next\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.placeOrder.bind(this),\n      disabled: item === null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Place order\"))));\n  }\n\n}\nCheckout.contextType = AppContext;","map":{"version":3,"sources":["/home/paul/PycharmProjects/django-projects/django-react-tours/frontend/src/pages/Checkout.js"],"names":["React","AppContext","FormFieldHook","OnHold","Checkout","Component","constructor","props","state","validationErrors","orderPlaced","placeOrder","context","then","setState","catch","render","booking","item","updateField","clearOrderItem","inputFields","label","name","errors","forEach","field","error","push","formFields","map","fieldProps","displayItem","price","start","tour_length","id","bind","contextType"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { AppContext } from \"../AppContext\";\nimport { FormFieldHook } from \"../components/form/FormField\";\nimport OnHold from \"../components/OnHold\";\nimport \"./Checkout.css\";\n// import { withFieldValidation } from \"../components/form/FieldValidation\";\n\n// const ValidatedField = withFieldValidation(FormFieldUsingHooks);\n\nexport default class Checkout extends React.Component {\n  static contextType = AppContext;\n\n  constructor(props) {\n    super(props);\n    this.state = { validationErrors: [], orderPlaced: false };\n  }\n\n  placeOrder() {\n    this.context\n      .placeOrder()\n      .then(() => {\n        this.setState({ validationErrors: [], orderPlaced: true });\n      })\n      .catch(validationErrors => {\n        this.setState({ validationErrors, orderPlaced: false });\n      });\n  }\n\n  render() {\n    const { booking, item, updateField, clearOrderItem } = this.context;\n    const { validationErrors, orderPlaced } = this.state;\n    const inputFields = [\n      { label: \"Name\", name: \"name\" },\n      { label: \"Email Address\", name: \"email_address\" },\n      { label: \"Street Address\", name: \"street_address\" },\n      { label: \"City\", name: \"city\" }\n    ];\n    if (orderPlaced) {\n      return (\n        <section className=\"Checkout\">\n          <header className=\"Checkout-header\">\n            <h2>Checkout</h2>\n            <h3>Thanks for buying an excursion with Explore California!</h3>\n          </header>\n        </section>\n      );\n    }\n    const errors = [];\n    inputFields.forEach(field => {\n      const error = validationErrors[field.name];\n      if (error) {\n        errors.push(\n          <li className=\"error\" key={field.name}>\n            {field.label}: {error}\n          </li>\n        );\n      }\n    });\n    const formFields = inputFields.map(fieldProps => {\n      return (\n        <FormFieldHook\n          key={fieldProps.name}\n          value={booking[fieldProps.name]}\n          onUpdate={updateField}\n          {...fieldProps}\n        />\n      );\n    });\n    let displayItem;\n    if (item) {\n      displayItem = (\n        <div>\n          {item.name} - ${item.price} starts on {item.start} for{\" \"}\n          {item.tour_length} days.&nbsp;\n          <button\n            className=\"Checkout-package-remove\"\n            onClick={() => clearOrderItem(item.id)}\n          >\n            Remove\n          </button>\n        </div>\n      );\n    }\n    return (\n      <section className=\"Checkout\">\n        <header className=\"Checkout-header\">\n          <h2>Checkout</h2>\n        </header>\n        <section className=\"Checkout-summary\">\n          {item && <OnHold duration={59} />}\n          {displayItem}\n        </section>\n        <section className=\"Checkout-form\">\n          <form>\n            <ul>{errors}</ul>\n            {formFields}\n          </form>\n        </section>\n        <section className=\"Checkout-actions\">\n          <div className=\"Checkout-actions__next\">\n            <button\n              onClick={this.placeOrder.bind(this)}\n              disabled={item === null}\n            >\n              Place order\n            </button>\n          </div>\n        </section>\n      </section>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}