{"ast":null,"code":"var _jsxFileName = \"/home/paul/PycharmProjects/django-projects/django-react-tours/frontend/src/pages/List.js\";\nimport React from \"react\";\nimport \"./List.css\";\nimport { AppContext } from \"../AppContext\";\nimport Item from \"../components/Item\";\nimport Pagination from \"../components/Pagination\";\nimport Filters from \"../components/Filters\";\nimport ServiceApi from \"../services/ServiceApi\";\nexport class OneItemList extends React.Component {\n  render() {\n    const _this$context = this.context,\n          wishlist = _this$context.wishlist,\n          toggleWishlist = _this$context.toggleWishlist;\n    const route = \"/details/1\";\n    const item = {\n      id: 1,\n      name: \"Example\",\n      thumbnail_url: \"/images/map_channel.gif\",\n      price: 777.77,\n      rating: \"easy\",\n      promo: \"Tour package description\"\n    };\n    return React.createElement(\"section\", {\n      className: \"List\",\n      \"data-testid\": \"list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"List-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25\n      },\n      __self: this\n    }, React.createElement(Item, {\n      route: route,\n      item: item,\n      wishlist: wishlist,\n      toggleWishlist: toggleWishlist,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26\n      },\n      __self: this\n    })));\n  }\n\n}\nOneItemList.context = AppContext;\nexport default class List extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n      pageIndex: 1,\n      totalItems: 0,\n      filters: {\n        price_min: null,\n        price_max: null,\n        search: \"\"\n      }\n    };\n    this.updateList();\n  }\n\n  updateList() {\n    const _this$state = this.state,\n          pageIndex = _this$state.pageIndex,\n          filters = _this$state.filters;\n    const queryParams = {};\n\n    if (filters.price_min) {\n      queryParams.price_min = filters.price_min;\n    }\n\n    if (filters.price_max) {\n      queryParams.price_max = filters.price_max;\n    }\n\n    if (filters.search && filters.search.length > 0) {\n      queryParams.search = filters.search;\n    }\n\n    ServiceApi.retrieveList(pageIndex, queryParams).then(data => {\n      const results = data.results,\n            count = data.count;\n      this.setState({\n        list: results,\n        totalItems: count\n      });\n    });\n  }\n\n  updateFilters(filters) {\n    this.setState({\n      filters\n    }, () => {\n      this.updateList();\n    });\n  }\n\n  previousPage() {\n    this.setState({\n      pageIndex: this.state.pageIndex - 1\n    });\n    this.updateList();\n  }\n\n  nextPage() {\n    this.setState({\n      pageIndex: this.state.pageIndex + 1\n    });\n    this.updateList();\n  }\n\n  render() {\n    const _this$context2 = this.context,\n          wishlist = _this$context2.wishlist,\n          toggleWishlist = _this$context2.toggleWishlist;\n    const _this$state2 = this.state,\n          list = _this$state2.list,\n          pageIndex = _this$state2.pageIndex,\n          totalItems = _this$state2.totalItems;\n    return React.createElement(\"section\", {\n      className: \"List\",\n      \"data-testid\": \"list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(Filters, {\n      onFilterUpdate: this.updateFilters.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    })), React.createElement(\"section\", {\n      className: \"List-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, list.map(item => {\n      return React.createElement(Item, {\n        key: item.id,\n        route: `/details/${item.id}`,\n        item: item,\n        wishlist: wishlist,\n        toggleWishlist: toggleWishlist,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      });\n    })), React.createElement(\"footer\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Pagination, {\n      pageIndex: pageIndex,\n      total: totalItems,\n      perPage: 6,\n      onNext: this.nextPage.bind(this),\n      onPrevious: this.previousPage.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    })));\n  }\n\n}\nList.contextType = AppContext;","map":{"version":3,"sources":["/home/paul/PycharmProjects/django-projects/django-react-tours/frontend/src/pages/List.js"],"names":["React","AppContext","Item","Pagination","Filters","ServiceApi","OneItemList","Component","render","context","wishlist","toggleWishlist","route","item","id","name","thumbnail_url","price","rating","promo","List","constructor","props","state","list","pageIndex","totalItems","filters","price_min","price_max","search","updateList","queryParams","length","retrieveList","then","data","results","count","setState","updateFilters","previousPage","nextPage","bind","map","contextType"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./List.css\";\nimport { AppContext } from \"../AppContext\";\nimport Item from \"../components/Item\";\nimport Pagination from \"../components/Pagination\";\nimport Filters from \"../components/Filters\";\nimport ServiceApi from \"../services/ServiceApi\";\n\nexport class OneItemList extends React.Component {\n  static context = AppContext;\n\n  render() {\n    const { wishlist, toggleWishlist } = this.context;\n    const route = \"/details/1\";\n    const item = {\n      id: 1,\n      name: \"Example\",\n      thumbnail_url: \"/images/map_channel.gif\",\n      price: 777.77,\n      rating: \"easy\",\n      promo: \"Tour package description\"\n    };\n    return (\n      <section className=\"List\" data-testid=\"list\">\n        <section className=\"List-items\">\n          <Item\n            route={route}\n            item={item}\n            wishlist={wishlist}\n            toggleWishlist={toggleWishlist}\n          />\n        </section>\n      </section>\n    );\n  }\n}\n\nexport default class List extends React.Component {\n  static contextType = AppContext;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n      pageIndex: 1,\n      totalItems: 0,\n      filters: {\n        price_min: null,\n        price_max: null,\n        search: \"\"\n      }\n    };\n    this.updateList();\n  }\n\n  updateList() {\n    const { pageIndex, filters } = this.state;\n    const queryParams = {};\n    if (filters.price_min) {\n      queryParams.price_min = filters.price_min;\n    }\n    if (filters.price_max) {\n      queryParams.price_max = filters.price_max;\n    }\n    if (filters.search && filters.search.length > 0) {\n      queryParams.search = filters.search;\n    }\n    ServiceApi.retrieveList(pageIndex, queryParams).then(data => {\n      const { results, count } = data;\n      this.setState({ list: results, totalItems: count });\n    });\n  }\n\n  updateFilters(filters) {\n    this.setState({ filters }, () => {\n      this.updateList();\n    });\n  }\n\n  previousPage() {\n    this.setState({ pageIndex: this.state.pageIndex - 1 });\n    this.updateList();\n  }\n\n  nextPage() {\n    this.setState({ pageIndex: this.state.pageIndex + 1 });\n    this.updateList();\n  }\n\n  render() {\n    const { wishlist, toggleWishlist } = this.context;\n    const { list, pageIndex, totalItems } = this.state;\n    return (\n      <section className=\"List\" data-testid=\"list\">\n        <header>\n          <Filters onFilterUpdate={this.updateFilters.bind(this)} />\n        </header>\n        <section className=\"List-items\">\n          {list.map(item => {\n            return (\n              <Item\n                key={item.id}\n                route={`/details/${item.id}`}\n                item={item}\n                wishlist={wishlist}\n                toggleWishlist={toggleWishlist}\n              />\n            );\n          })}\n        </section>\n        <footer>\n          <Pagination\n            pageIndex={pageIndex}\n            total={totalItems}\n            perPage={6}\n            onNext={this.nextPage.bind(this)}\n            onPrevious={this.previousPage.bind(this)}\n          />\n        </footer>\n      </section>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}