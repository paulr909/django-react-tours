{"ast":null,"code":"import _objectSpread from \"/home/paul/PycharmProjects/django-projects/django-react-tours/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/paul/PycharmProjects/django-projects/django-react-tours/frontend/src/App.js\";\nimport React from \"react\";\nimport { BrowserRouter, Route, NavLink } from \"react-router-dom\";\nimport \"./App.css\";\nimport { AppContext } from \"./AppContext\";\nimport List from \"./pages/List\";\nimport Details from \"./pages/Details\";\nimport Checkout from \"./pages/Checkout\";\nimport CartLink from \"./components/CartLink\";\nimport AppSidebar from \"./AppSidebar\";\nimport ServiceApi from \"./services/ServiceApi\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      wishlist: [],\n      booking: {\n        name: \"\",\n        email_address: \"\",\n        street_address: \"\",\n        city: \"\"\n      },\n      item: null,\n      toggleWishlist: this.toggleWishlist.bind(this),\n      updateField: this.updateField.bind(this),\n      setOrderItem: this.setOrderItem.bind(this),\n      clearOrderItem: this.clearOrderItem.bind(this),\n      placeOrder: this.placeOrder.bind(this)\n    };\n    ServiceApi.retrieveWishlist().then(data => {\n      this.setState({\n        wishlist: data\n      });\n    });\n  }\n\n  toggleWishlist(itemId) {\n    let toggle;\n\n    if (this.state.wishlist.includes(itemId)) {\n      toggle = ServiceApi.wishlistDelete(itemId);\n    } else {\n      toggle = ServiceApi.wishlistAdd(itemId);\n    }\n\n    toggle.then(() => {\n      ServiceApi.retrieveWishlist().then(data => {\n        this.setState({\n          wishlist: data\n        });\n      });\n    });\n  }\n\n  updateField(field, value) {\n    const booking = this.state.booking;\n    booking[field] = value;\n    this.setState({\n      booking\n    });\n  }\n\n  setOrderItem(item) {\n    return new Promise(resolve => {\n      ServiceApi.wishlistCartStatus(item.id, true).then(() => {\n        this.setState({\n          item\n        });\n        resolve(item);\n      });\n    });\n  }\n\n  clearOrderItem(itemId) {\n    return new Promise(resolve => {\n      ServiceApi.wishlistCartStatus(itemId, false).then(() => {\n        this.setState({\n          item: null\n        });\n        resolve();\n      });\n    });\n  }\n\n  placeOrder() {\n    const _this$state = this.state,\n          booking = _this$state.booking,\n          item = _this$state.item;\n\n    const bookingData = _objectSpread({}, booking);\n\n    bookingData.package = item.id;\n    return new Promise((resolve, reject) => {\n      ServiceApi.createBooking(bookingData).then(() => {\n        this.setState({\n          item: null\n        });\n        resolve();\n      }).catch(validationErrors => {\n        reject(validationErrors);\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(BrowserRouter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      className: \"App-nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App-nav__main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Explore our tours\")), React.createElement(\"div\", {\n      className: \"App-nav__links\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Advertise your tour\"), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Help\"), React.createElement(CartLink, {\n      booking: this.state.booking,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }))), React.createElement(AppSidebar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"section\", {\n      className: \"App-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(AppContext.Provider, {\n      value: this.state,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/\",\n      exact: true,\n      component: List,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/details/:id\",\n      component: Details,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/checkout\",\n      component: Checkout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/paul/PycharmProjects/django-projects/django-react-tours/frontend/src/App.js"],"names":["React","BrowserRouter","Route","NavLink","AppContext","List","Details","Checkout","CartLink","AppSidebar","ServiceApi","App","Component","constructor","props","state","wishlist","booking","name","email_address","street_address","city","item","toggleWishlist","bind","updateField","setOrderItem","clearOrderItem","placeOrder","retrieveWishlist","then","data","setState","itemId","toggle","includes","wishlistDelete","wishlistAdd","field","value","Promise","resolve","wishlistCartStatus","id","bookingData","package","reject","createBooking","catch","validationErrors","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { BrowserRouter, Route, NavLink } from \"react-router-dom\";\nimport \"./App.css\";\n\nimport { AppContext } from \"./AppContext\";\nimport List from \"./pages/List\";\nimport Details from \"./pages/Details\";\nimport Checkout from \"./pages/Checkout\";\nimport CartLink from \"./components/CartLink\";\nimport AppSidebar from \"./AppSidebar\";\nimport ServiceApi from \"./services/ServiceApi\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      wishlist: [],\n      booking: {\n        name: \"\",\n        email_address: \"\",\n        street_address: \"\",\n        city: \"\"\n      },\n      item: null,\n      toggleWishlist: this.toggleWishlist.bind(this),\n      updateField: this.updateField.bind(this),\n      setOrderItem: this.setOrderItem.bind(this),\n      clearOrderItem: this.clearOrderItem.bind(this),\n      placeOrder: this.placeOrder.bind(this)\n    };\n    ServiceApi.retrieveWishlist().then(data => {\n      this.setState({ wishlist: data });\n    });\n  }\n\n  toggleWishlist(itemId) {\n    let toggle;\n    if (this.state.wishlist.includes(itemId)) {\n      toggle = ServiceApi.wishlistDelete(itemId);\n    } else {\n      toggle = ServiceApi.wishlistAdd(itemId);\n    }\n    toggle.then(() => {\n      ServiceApi.retrieveWishlist().then(data => {\n        this.setState({ wishlist: data });\n      });\n    });\n  }\n\n  updateField(field, value) {\n    const { booking } = this.state;\n    booking[field] = value;\n    this.setState({ booking });\n  }\n\n  setOrderItem(item) {\n    return new Promise(resolve => {\n      ServiceApi.wishlistCartStatus(item.id, true).then(() => {\n        this.setState({ item });\n        resolve(item);\n      });\n    });\n  }\n\n  clearOrderItem(itemId) {\n    return new Promise(resolve => {\n      ServiceApi.wishlistCartStatus(itemId, false).then(() => {\n        this.setState({ item: null });\n        resolve();\n      });\n    });\n  }\n\n  placeOrder() {\n    const { booking, item } = this.state;\n    const bookingData = { ...booking };\n    bookingData.package = item.id;\n\n    return new Promise((resolve, reject) => {\n      ServiceApi.createBooking(bookingData)\n        .then(() => {\n          this.setState({ item: null });\n          resolve();\n        })\n        .catch(validationErrors => {\n          reject(validationErrors);\n        });\n    });\n  }\n\n  render() {\n    return (\n      <BrowserRouter>\n        <div className=\"App\">\n          <nav className=\"App-nav\">\n            <div className=\"App-nav__main\">\n              <NavLink to=\"/\">Explore our tours</NavLink>\n            </div>\n            <div className=\"App-nav__links\">\n              <button>Advertise your tour</button>\n              <button>Help</button>\n              <CartLink booking={this.state.booking} />\n            </div>\n          </nav>\n          <AppSidebar />\n          <section className=\"App-content\">\n            <AppContext.Provider value={this.state}>\n              <Route path=\"/\" exact component={List} />\n              <Route path=\"/details/:id\" component={Details} />\n              <Route path=\"/checkout\" component={Checkout} />\n            </AppContext.Provider>\n          </section>\n        </div>\n      </BrowserRouter>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}