{"ast":null,"code":"var _jsxFileName = \"/home/paul/PycharmProjects/django-projects/django-react-tours/frontend/src/pages/List.js\";\nimport React from 'react';\nimport './List.css';\nimport { AppContext } from '../AppContext';\nimport Item from '../components/Item';\nimport Pagination from '../components/Pagination';\nimport Filters from '../components/Filters';\nimport ServiceApi from '../services/ServiceApi';\nexport class OneItemList extends React.Component {\n  render() {\n    const _this$context = this.context,\n          wishlist = _this$context.wishlist,\n          toggleWishlist = _this$context.toggleWishlist;\n    const route = \"/details/1\";\n    const item = {\n      id: 1,\n      name: \"Example\",\n      thumbnail_url: \"/images/map_channel.gif\",\n      price: 777.77,\n      rating: 'easy',\n      promo: 'Tour package description'\n    };\n    return React.createElement(\"section\", {\n      className: \"List\",\n      \"data-testid\": \"list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"List-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    }, React.createElement(Item, {\n      route: route,\n      item: item,\n      wishlist: wishlist,\n      toggleWishlist: toggleWishlist,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20\n      },\n      __self: this\n    })));\n  }\n\n}\nOneItemList.context = AppContext;\nexport default class List extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n      pageIndex: 1,\n      totalItems: 0,\n      filters: {\n        price_min: null,\n        price_max: null,\n        search: ''\n      }\n    };\n    this.updateList();\n  }\n\n  updateList() {\n    const _this$state = this.state,\n          pageIndex = _this$state.pageIndex,\n          filters = _this$state.filters;\n    const queryParams = {};\n\n    if (filters.price_min) {\n      queryParams.price_min = filters.price_min;\n    }\n\n    if (filters.price_max) {\n      queryParams.price_max = filters.price_max;\n    }\n\n    if (filters.search && filters.search.length > 0) {\n      queryParams.search = filters.search;\n    }\n\n    ServiceApi.retrieveList(pageIndex, queryParams).then(data => {\n      const results = data.results,\n            count = data.count;\n      this.setState({\n        list: results,\n        totalItems: count\n      });\n    });\n  }\n\n  updateFilters(filters) {\n    this.setState({\n      filters\n    }, () => {\n      this.updateList();\n    });\n  }\n\n  previousPage() {\n    this.setState({\n      pageIndex: this.state.pageIndex - 1\n    });\n    this.updateList();\n  }\n\n  nextPage() {\n    this.setState({\n      pageIndex: this.state.pageIndex + 1\n    });\n    this.updateList();\n  }\n\n  render() {\n    const _this$context2 = this.context,\n          wishlist = _this$context2.wishlist,\n          toggleWishlist = _this$context2.toggleWishlist;\n    const _this$state2 = this.state,\n          list = _this$state2.list,\n          pageIndex = _this$state2.pageIndex,\n          totalItems = _this$state2.totalItems;\n    return React.createElement(\"section\", {\n      className: \"List\",\n      \"data-testid\": \"list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Filters, {\n      onFilterUpdate: this.updateFilters.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    })), React.createElement(\"section\", {\n      className: \"List-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, list.map(item => {\n      return React.createElement(Item, {\n        key: item.id,\n        route: `/details/${item.id}`,\n        item: item,\n        wishlist: wishlist,\n        toggleWishlist: toggleWishlist,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      });\n    })), React.createElement(\"footer\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(Pagination, {\n      pageIndex: pageIndex,\n      total: totalItems,\n      perPage: 9,\n      onNext: this.nextPage.bind(this),\n      onPrevious: this.previousPage.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    })));\n  }\n\n}\nList.contextType = AppContext;","map":{"version":3,"sources":["/home/paul/PycharmProjects/django-projects/django-react-tours/frontend/src/pages/List.js"],"names":["React","AppContext","Item","Pagination","Filters","ServiceApi","OneItemList","Component","render","context","wishlist","toggleWishlist","route","item","id","name","thumbnail_url","price","rating","promo","List","constructor","props","state","list","pageIndex","totalItems","filters","price_min","price_max","search","updateList","queryParams","length","retrieveList","then","data","results","count","setState","updateFilters","previousPage","nextPage","bind","map","contextType"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,YAAP;AAEA,SAASC,UAAT,QAA2B,eAA3B;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AAEA,OAAO,MAAMC,WAAN,SAA0BN,KAAK,CAACO,SAAhC,CAA0C;AAG/CC,EAAAA,MAAM,GAAG;AAAA,0BAC8B,KAAKC,OADnC;AAAA,UACCC,QADD,iBACCA,QADD;AAAA,UACWC,cADX,iBACWA,cADX;AAEP,UAAMC,KAAK,GAAG,YAAd;AACA,UAAMC,IAAI,GAAG;AAAEC,MAAAA,EAAE,EAAE,CAAN;AAASC,MAAAA,IAAI,EAAE,SAAf;AAA0BC,MAAAA,aAAa,EAAE,yBAAzC;AAAoEC,MAAAA,KAAK,EAAE,MAA3E;AAAmFC,MAAAA,MAAM,EAAE,MAA3F;AAAoGC,MAAAA,KAAK,EAAE;AAA3G,KAAb;AACA,WACE;AAAS,MAAA,SAAS,EAAC,MAAnB;AAA0B,qBAAY,MAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAS,MAAA,SAAS,EAAC,YAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAEP,KAAb;AAAoB,MAAA,IAAI,EAAEC,IAA1B;AAAiC,MAAA,QAAQ,EAAEH,QAA3C;AAAqD,MAAA,cAAc,EAAEC,cAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CADF;AAOD;;AAd8C;AAApCL,W,CACJG,O,GAAUR,U;AAgBnB,eAAe,MAAMmB,IAAN,SAAmBpB,KAAK,CAACO,SAAzB,CAAmC;AAGhDc,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE,EADK;AAEXC,MAAAA,SAAS,EAAE,CAFA;AAGXC,MAAAA,UAAU,EAAE,CAHD;AAIXC,MAAAA,OAAO,EAAE;AACPC,QAAAA,SAAS,EAAE,IADJ;AAEPC,QAAAA,SAAS,EAAE,IAFJ;AAGPC,QAAAA,MAAM,EAAE;AAHD;AAJE,KAAb;AAUA,SAAKC,UAAL;AACD;;AAEDA,EAAAA,UAAU,GAAG;AAAA,wBACoB,KAAKR,KADzB;AAAA,UACHE,SADG,eACHA,SADG;AAAA,UACQE,OADR,eACQA,OADR;AAEX,UAAMK,WAAW,GAAG,EAApB;;AACA,QAAIL,OAAO,CAACC,SAAZ,EAAuB;AACrBI,MAAAA,WAAW,CAACJ,SAAZ,GAAwBD,OAAO,CAACC,SAAhC;AACD;;AACD,QAAID,OAAO,CAACE,SAAZ,EAAuB;AACrBG,MAAAA,WAAW,CAACH,SAAZ,GAAwBF,OAAO,CAACE,SAAhC;AACD;;AACD,QAAIF,OAAO,CAACG,MAAR,IAAkBH,OAAO,CAACG,MAAR,CAAeG,MAAf,GAAwB,CAA9C,EAAiD;AAC/CD,MAAAA,WAAW,CAACF,MAAZ,GAAqBH,OAAO,CAACG,MAA7B;AACD;;AACDzB,IAAAA,UAAU,CAAC6B,YAAX,CAAwBT,SAAxB,EAAmCO,WAAnC,EAAgDG,IAAhD,CAAsDC,IAAD,IAAU;AAAA,YACrDC,OADqD,GAClCD,IADkC,CACrDC,OADqD;AAAA,YAC5CC,KAD4C,GAClCF,IADkC,CAC5CE,KAD4C;AAE7D,WAAKC,QAAL,CAAc;AAAEf,QAAAA,IAAI,EAAEa,OAAR;AAAiBX,QAAAA,UAAU,EAAEY;AAA7B,OAAd;AACD,KAHD;AAID;;AAEDE,EAAAA,aAAa,CAACb,OAAD,EAAU;AACrB,SAAKY,QAAL,CAAc;AAAEZ,MAAAA;AAAF,KAAd,EAA2B,MAAM;AAC/B,WAAKI,UAAL;AACD,KAFD;AAGD;;AAEDU,EAAAA,YAAY,GAAG;AACb,SAAKF,QAAL,CAAc;AAAEd,MAAAA,SAAS,EAAE,KAAKF,KAAL,CAAWE,SAAX,GAAuB;AAApC,KAAd;AACA,SAAKM,UAAL;AACD;;AAEDW,EAAAA,QAAQ,GAAG;AACT,SAAKH,QAAL,CAAc;AAAEd,MAAAA,SAAS,EAAE,KAAKF,KAAL,CAAWE,SAAX,GAAuB;AAApC,KAAd;AACA,SAAKM,UAAL;AACD;;AAEDvB,EAAAA,MAAM,GAAG;AAAA,2BAC8B,KAAKC,OADnC;AAAA,UACCC,QADD,kBACCA,QADD;AAAA,UACWC,cADX,kBACWA,cADX;AAAA,yBAEiC,KAAKY,KAFtC;AAAA,UAECC,IAFD,gBAECA,IAFD;AAAA,UAEOC,SAFP,gBAEOA,SAFP;AAAA,UAEkBC,UAFlB,gBAEkBA,UAFlB;AAGP,WACE;AAAS,MAAA,SAAS,EAAC,MAAnB;AAA0B,qBAAY,MAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,OAAD;AAAS,MAAA,cAAc,EAAE,KAAKc,aAAL,CAAmBG,IAAnB,CAAwB,IAAxB,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,EAIE;AAAS,MAAA,SAAS,EAAC,YAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGnB,IAAI,CAACoB,GAAL,CAAS/B,IAAI,IAAI;AAChB,aAAQ,oBAAC,IAAD;AAAM,QAAA,GAAG,EAAEA,IAAI,CAACC,EAAhB;AAAoB,QAAA,KAAK,EAAG,YAAWD,IAAI,CAACC,EAAG,EAA/C;AAAkD,QAAA,IAAI,EAAED,IAAxD;AAA8D,QAAA,QAAQ,EAAEH,QAAxE;AAAkF,QAAA,cAAc,EAAEC,cAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAR;AACD,KAFA,CADH,CAJF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,UAAD;AACE,MAAA,SAAS,EAAEc,SADb;AAEE,MAAA,KAAK,EAAEC,UAFT;AAGE,MAAA,OAAO,EAAE,CAHX;AAIE,MAAA,MAAM,EAAE,KAAKgB,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAJV;AAKE,MAAA,UAAU,EAAE,KAAKF,YAAL,CAAkBE,IAAlB,CAAuB,IAAvB,CALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CATF,CADF;AAqBD;;AA5E+C;AAA7BvB,I,CACZyB,W,GAAc5C,U","sourcesContent":["import React from 'react';\nimport './List.css';\n\nimport { AppContext } from '../AppContext';\nimport Item from '../components/Item';\nimport Pagination from '../components/Pagination';\nimport Filters from '../components/Filters';\nimport ServiceApi from '../services/ServiceApi';\n\nexport class OneItemList extends React.Component {\n  static context = AppContext;\n\n  render() {\n    const { wishlist, toggleWishlist } = this.context;\n    const route = \"/details/1\";\n    const item = { id: 1, name: \"Example\", thumbnail_url: \"/images/map_channel.gif\", price: 777.77, rating: 'easy' , promo: 'Tour package description' };\n    return (\n      <section className=\"List\" data-testid=\"list\">\n        <section className=\"List-items\">\n          <Item route={route} item={item}  wishlist={wishlist} toggleWishlist={toggleWishlist} />\n        </section>\n      </section>\n    );\n  }\n}\n\nexport default class List extends React.Component {\n  static contextType = AppContext;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n      pageIndex: 1,\n      totalItems: 0,\n      filters: {\n        price_min: null,\n        price_max: null,\n        search: ''\n      }\n    };\n    this.updateList();\n  }\n\n  updateList() {\n    const { pageIndex, filters } = this.state;\n    const queryParams = {};\n    if (filters.price_min) {\n      queryParams.price_min = filters.price_min;\n    }\n    if (filters.price_max) {\n      queryParams.price_max = filters.price_max;\n    }\n    if (filters.search && filters.search.length > 0) {\n      queryParams.search = filters.search;\n    }\n    ServiceApi.retrieveList(pageIndex, queryParams).then((data) => {\n      const { results, count } = data;\n      this.setState({ list: results, totalItems: count });\n    })\n  }\n\n  updateFilters(filters) {\n    this.setState({ filters }, () => {\n      this.updateList();\n    });\n  }\n\n  previousPage() {\n    this.setState({ pageIndex: this.state.pageIndex - 1 });\n    this.updateList();\n  }\n\n  nextPage() {\n    this.setState({ pageIndex: this.state.pageIndex + 1 });\n    this.updateList();\n  }\n\n  render() {\n    const { wishlist, toggleWishlist } = this.context;\n    const { list, pageIndex, totalItems } = this.state;\n    return (\n      <section className=\"List\" data-testid=\"list\">\n        <header>\n          <Filters onFilterUpdate={this.updateFilters.bind(this)} />\n        </header>\n        <section className=\"List-items\">\n          {list.map(item => {\n            return (<Item key={item.id} route={`/details/${item.id}`} item={item} wishlist={wishlist} toggleWishlist={toggleWishlist} />);\n          })}\n        </section>\n        <footer>\n          <Pagination\n            pageIndex={pageIndex}\n            total={totalItems}\n            perPage={9}\n            onNext={this.nextPage.bind(this)}\n            onPrevious={this.previousPage.bind(this)}\n          />\n        </footer>\n      </section>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}