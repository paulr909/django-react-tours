{"ast":null,"code":"import Axios from 'axios';\nconst clientId = 'UYpBkKY6vYW72ayc7ovAZ5xvUapQ3a8TucsGI2jS';\nconst clientSecret = 'REvBZR4e1yVflIrF1FAWcLVl08ZtewuxinaQsSNt6XKpxar6v17LvjkrCkKVDqHQUTDCcLfuZfm1V7JQ0C9qdKnYQpbjjjMrYMt76kdzTtE3xGv4ZaxdX9TnLsTeadZu';\n\nlet _accessToken;\n\nexport function getAccessToken() {\n  return new Promise(resolve => {\n    if (_accessToken) {\n      resolve(_accessToken);\n    } else {\n      const data = {\n        grant_type: 'client_credentials',\n        client_id: clientId,\n        client_secret: clientSecret,\n        scope: 'read'\n      };\n      Axios.post('/oauth/token/', data).then(response => {\n        _accessToken = response.data.access_token;\n        resolve(_accessToken);\n      });\n    }\n  });\n}\nexport async function getConfig() {\n  const accessToken = await getAccessToken();\n  const config = {\n    headers: {\n      Authorization: `Bearer ${accessToken}`\n    }\n  };\n  return new Promise(resolve => {\n    resolve(config);\n  });\n}\nexport default {\n  async retrieveWishlist() {\n    const config = await getConfig();\n    return new Promise(resolve => {\n      Axios.get('/api/v1/wishlist/', config).then(response => {\n        resolve(response.data);\n      });\n    });\n  },\n\n  async wishlistAdd(id) {\n    const config = await getConfig();\n    const data = {\n      id\n    };\n    return Axios.post('/api/v1/wishlist/', data, config);\n  },\n\n  async wishlistDelete(itemId) {\n    const config = await getConfig();\n    return Axios.delete(`/api/v1/wishlist/${itemId}/`, config);\n  },\n\n  async wishlistCartStatus(id, added_to_cart) {\n    const config = await getConfig();\n    const data = {\n      id,\n      added_to_cart\n    };\n    return Axios.patch(`/api/v1/wishlist/${id}/`, data, config);\n  },\n\n  async retrieveDetails(id) {\n    const config = await getConfig();\n    return new Promise(resolve => {\n      Axios.get(`/api/v1/public/packages/${id}/`, config).then(response => {\n        resolve(response.data);\n      });\n    });\n  },\n\n  async retrieveList(pageIndex, queryParams) {\n    const config = await getConfig();\n    config['params'] = queryParams;\n    config['params']['page'] = pageIndex;\n    return new Promise(resolve => {\n      Axios.get('/api/v1/public/packages/', config).then(response => {\n        resolve(response.data);\n      });\n    });\n  },\n\n  async createBooking(data) {\n    const config = await getConfig();\n    return new Promise((resolve, reject) => {\n      Axios.post('/api/v1/bookings/', data, config).then(response => {\n        resolve(response.data);\n      }).catch(error => {\n        reject(error.response.data);\n      });\n    });\n  }\n\n};","map":{"version":3,"sources":["/home/paul/PycharmProjects/django-projects/django-react-tours/frontend/src/services/ServiceApi.js"],"names":["Axios","clientId","clientSecret","_accessToken","getAccessToken","Promise","resolve","data","grant_type","client_id","client_secret","scope","post","then","response","access_token","getConfig","accessToken","config","headers","Authorization","retrieveWishlist","get","wishlistAdd","id","wishlistDelete","itemId","delete","wishlistCartStatus","added_to_cart","patch","retrieveDetails","retrieveList","pageIndex","queryParams","createBooking","reject","catch","error"],"mappings":"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","sourcesContent":["import Axios from 'axios';\n\nconst clientId = 'UYpBkKY6vYW72ayc7ovAZ5xvUapQ3a8TucsGI2jS';\nconst clientSecret = 'REvBZR4e1yVflIrF1FAWcLVl08ZtewuxinaQsSNt6XKpxar6v17LvjkrCkKVDqHQUTDCcLfuZfm1V7JQ0C9qdKnYQpbjjjMrYMt76kdzTtE3xGv4ZaxdX9TnLsTeadZu';\n\nlet _accessToken;\n\nexport function getAccessToken() {\n  return new Promise((resolve) => {\n    if (_accessToken) {\n      resolve(_accessToken);\n    } else {\n      const data = {\n        grant_type: 'client_credentials',\n        client_id: clientId,\n        client_secret: clientSecret,\n        scope: 'read'\n      }\n      Axios.post('/oauth/token/', data).then((response) => {\n        _accessToken = response.data.access_token;\n        resolve(_accessToken);\n      });\n    }\n  });\n}\n\nexport async function getConfig() {\n  const accessToken = await getAccessToken();\n  const config = {\n    headers: {\n      Authorization: `Bearer ${accessToken}`\n    }\n  };\n  return new Promise((resolve) => {\n    resolve(config);\n  });\n}\n\nexport default {\n  async retrieveWishlist() {\n    const config = await getConfig();\n    return new Promise((resolve) => {\n      Axios.get('/api/v1/wishlist/', config).then((response) => {\n        resolve(response.data);\n      });\n    });\n  },\n\n  async wishlistAdd(id) {\n    const config = await getConfig();\n    const data = { id };\n    return Axios.post('/api/v1/wishlist/', data, config);\n  },\n\n  async wishlistDelete(itemId) {\n    const config = await getConfig();\n    return Axios.delete(`/api/v1/wishlist/${itemId}/`, config);\n  },\n\n  async wishlistCartStatus(id, added_to_cart) {\n    const config = await getConfig();\n    const data = { id, added_to_cart };\n    return Axios.patch(`/api/v1/wishlist/${id}/`, data, config);\n  },\n\n  async retrieveDetails(id) {\n    const config = await getConfig();\n    return new Promise((resolve) => {\n      Axios.get(`/api/v1/public/packages/${id}/`, config).then((response) => {\n        resolve(response.data);\n      });\n    });\n  },\n\n  async retrieveList(pageIndex, queryParams) {\n    const config = await getConfig();\n    config['params'] = queryParams;\n    config['params']['page'] = pageIndex;\n    return new Promise((resolve) => {\n      Axios.get('/api/v1/public/packages/', config).then((response) => {\n        resolve(response.data);\n      });\n    });\n  },\n\n  async createBooking(data) {\n    const config = await getConfig();\n    return new Promise((resolve, reject) => {\n      Axios.post('/api/v1/bookings/', data, config).then((response) => {\n        resolve(response.data);\n      }).catch((error) => {\n        reject(error.response.data);\n      });\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}